---
layout: 	post
title: 		拍好条纹不容易
subtitle: 	关于摩尔纹效应的说明
author: 	Philms 
date: 		2015-08-09
header-img: img/post/2017/post-bg-ios9-web.jpg
catalog: 	true
tags: 		["其他","摄影","思考"]
---

话说今年夏天服饰条纹很流行（可能是因为条纹的视觉作用吧），然而想把条纹拍下来却不是那么容易，因为一不小心条纹在数码相片中就出现了锯齿（jaggies）或者摩尔纹（Moiré effects）。

要看见摩尔纹，最简单的方法就是拿起手机，对着电视屏幕，点击对焦之后清晰可见 。

虽然之前听说过摩尔纹，也经常碰到，找到了一些减轻或者避免的方法，但是对背后的原理并不是特别清晰。直到最近在数字图像处理中才有所了解。

简单地说数码设备拍摄照片是将模拟信号转化为数字信号的过程，具体实现起来就是使用傅立叶变换/级数进行采样拟合。虽然理论上傅立叶级数可以无限展开，得到无限接近的曲线，但是受制于芯片的处理能力，傅立叶不可能无限展开，因此采样时有可能出现信息丢失，出现混叠（Aliasing）。某种程度上说混叠在数码照片中是不可避免的（当然利用奈奎斯特准则可以最大程度避免失真）。

混叠有两种，一种是空间混叠，一种是时间混叠。空间混叠是因为采样不足(Under-Aliasing)，根据奈奎斯特准则，采样频率需为样本频率的两倍，才能实现完全采样;而时间混叠则产生于图片序列的时间间隔。一个常见的时间混叠现象就是是车轮效应-即有时候我们看到向前行驶的汽车的轮子却是向后转的。因为人眼观看物体的速率是24FPS，如果汽车轮子的速率为24K+mr/s，其中m在0-24/n之间，n为轮子辐条数量K 为非零正整数，则我们看到轮子向前转动；而如果汽车轮子的速率为24K-mr/s，，汽车轮子看上去就是向后转动。另外一个现象就是我们用录像机拍摄日光灯下的画面时，会感觉画面一直在闪烁，其原因是录像机的刷新率与日光灯的频率不一致，相机采样时某一刻日光灯是黑的，于是产生闪烁。

而摩尔纹则是空间混叠的一种，其特殊性在于，采样频率和样本频率接近，产生类似干涉的叠加效应。具体来说，由于相机CCD的各个点不是连续的，而是存在空隙。在拍摄物体曝光的瞬间，数据点到达传感器上，有些点落在CCD的空隙上，有些落在传感器上，产生明暗相间的条纹状。当拍摄规整的画面，如条纹、格子等，如果相机CCD与条纹之间存在一定角度而不是严格平行且像素的空间频率与影像中条纹的空间频率接近，则产生叠加效应，于是出现摩尔纹(看着像波纹)。

既然相机摩尔纹是由于感光元件像素的空间频率与影像中条纹的空间频率接近，因此对于数码设备来说，比较简单的方法就是使数字相机的解像力小于感光对象的空间频率，即使镜头的分辨率或者透过镜头的图像分辨率小于感光元件的空间频率。具体解决方法有两种，一种是使提高数码相机传感器的分辨率，另一种就是使用低通滤镜，消除图像高频部分。前者受制于技术和成本，后者则会使图像变得模糊。这里引申出来就是如果机身的传感器性能过差，高素质镜头图像经过低通滤镜后，其高分辨率优势完全发挥不出来。需要注意的就是，有时候显示器分辨率和图片中的条纹频率接近时也容易出现摩尔纹（即拿手机拍屏幕的时候）。生活中的其它例子有,透过纱窗看砖墙或者其它格子状的物体时,也会出现波纹

最后，为什么解决摩尔纹不能采用相反的方法即使数字相机的解像力大于感光对象的空间频率，因为这样直接导致了采样不足，出现的问题就是锯齿。最简单的例子就是把一张图像放大，则边缘产生锯齿。有时候当一些带有纹理的图片分辨率超过显示分辨率也会出现锯齿，给人的感觉就是图片锐化过度(也就是说，锐化需要根据用途进行)。 举个例子，用小比例看一些手持DV拍摄的画面时，因为机身的晃动，条纹的锯齿感特别明显，而全屏时则好很多，不过这个和播放器及显卡也有一定关系）。

备注:
本文对通信的一些理解可能有问题，若有不足,请指出；

电视屏幕容易出现摩尔纹是电视摄像采样率问题；

视频拍摄日光灯画面不闪烁将快门调为与日光灯刷新频率一致即可，即1/60s。

Reference:
[知乎：为什么拿相机对着电脑屏幕照相，照片会出现波纹？](http://www.zhihu.com/question/20103695)
Rafael C. Gonzalez / Richard E. Woods：Digital Image Processing（Chapter4）